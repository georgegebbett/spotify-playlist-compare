(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){},54:function(e,t,n){},74:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(38),r=n.n(i),s=(n(48),n(49),n(12)),j=n(3),o=n(7),l=n(39),d=n(40),u=(n(54),n(1));function b(){var e=a.a.useState(""),t=Object(o.a)(e,2),n=t[0],i=t[1];a.a.useEffect((function(){fetch("/api/auth/getLoginUrl").then((function(e){return e.json()})).then((function(e){return i(e.url)}))}),[]);return Object(u.jsx)(c.Fragment,{children:Object(u.jsxs)("span",{className:"spotifyButton",onClick:function(){window.location=n},children:[Object(u.jsx)(l.a,{icon:d.a})," Login with Spotify"]})})}function p(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("header",{className:"App-header",children:[Object(u.jsx)("h1",{children:"How much did your taste change between your Spotify Wrappeds? \ud83e\udd14"}),Object(u.jsx)("br",{}),Object(u.jsx)(b,{})]})})}var O=n(13),h=n(2),f=n(14),x=n.n(f),v=n(17),m=n(18),y=n.n(m),g=n(24),w=n(77),S=n(16),k=n(78);var C=function(e){var t=Object(c.useState)(void 0),n=Object(o.a)(t,2),a=(n[0],n[1]),i=e.token;return Object(c.useEffect)((function(){var t=document.createElement("script");t.src="https://sdk.scdn.co/spotify-player.js",t.async=!0,document.body.appendChild(t),window.onSpotifyWebPlaybackSDKReady=function(){var t=new window.Spotify.Player({name:"Wrapped Comparer",getOAuthToken:function(t){t(e.token)},volume:.5});a(t),t.addListener("ready",(function(n){var c=n.device_id;console.log("Ready with Device ID",c),function(e){var t=e.spotify_uri,n=e.playerInstance._options.getOAuthToken,c=e.device_id;n((function(e){fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(c),{method:"PUT",body:JSON.stringify({context_uri:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}})}))}({playerInstance:t,spotify_uri:e.uri,device_id:c})})),t.addListener("not_ready",(function(e){var t=e.device_id;console.log("Device ID has gone offline",t)})),t.connect()}}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("div",{className:"main-wrapper"})})})};function N(){var e=Object(c.useState)(void 0),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)({p1:"",p2:""}),r=Object(o.a)(i,2),s=r[0],l=r[1],d=Object(c.useState)(!1),b=Object(o.a)(d,2),p=b[0],f=b[1],m=Object(c.useState)(void 0),N=Object(o.a)(m,2),D=N[0],F=N[1],P=Object(j.f)();Object(c.useEffect)((function(){var e=function(){var e=Object(v.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/app/userPlaylists");case 2:t=e.sent,n=t.data,console.log(n),a(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(v.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/auth/spotifyToken");case 2:t=e.sent,n=t.data,console.log(n),F(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]),Object(c.useEffect)((function(){s.p1===s.p2||""===s.p1||""===s.p2?f(!1):f(!0)}),[s]);return Object(u.jsxs)(c.Fragment,{children:[void 0!==D&&void 0!==n?Object(u.jsx)(C,{token:D,uri:n[0].uri}):null,Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("p",{children:"The playlists are:"}),Object(u.jsx)("br",{}),Object(u.jsxs)(w.a,{onSubmit:function(e){e.preventDefault(),P("/compare?p1=".concat(s.p1,"&p2=").concat(s.p2))},onChange:function(e){l(Object(h.a)(Object(h.a)({},s),{},Object(O.a)({},e.target.name,e.target.value)))},children:[Object(u.jsxs)(g.a,{striped:!0,hover:!0,bordered:!0,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Year"}),Object(u.jsx)("td",{children:"Playlist"}),Object(u.jsx)("td",{children:"Playlist 1"}),Object(u.jsx)("td",{children:"Playlist 2"})]})}),Object(u.jsx)("tbody",{children:n?n.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.year}),Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:Object(u.jsx)(S.a,{type:"radio",name:"p1",value:e.id})}),Object(u.jsx)("td",{children:Object(u.jsx)(S.a,{type:"radio",name:"p2",value:e.id})})]},e.id)})):null})]}),Object(u.jsx)(k.a,{variant:"primary",type:"submit",disabled:!p,children:"Compare!"})]})]})]})}function D(e){var t=e.playlistData;return Object(u.jsx)(c.Fragment,{children:Object(u.jsxs)(g.a,{striped:!0,hover:!0,bordered:!0,size:"sm",className:"playlist-table",children:[Object(u.jsxs)("thead",{children:[Object(u.jsx)("tr",{children:Object(u.jsx)("th",{colSpan:"3",children:t.name})}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"#"}),Object(u.jsx)("th",{children:"Track name"}),Object(u.jsx)("th",{children:"Artist"})]})]}),Object(u.jsx)("tbody",{children:t?t.tracks.map((function(e){return Object(u.jsxs)("tr",{className:e.inOtherList?"table-warning":null,children:[Object(u.jsx)("td",{children:e.index}),Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:e.artist})]},e.id)})):null})]})})}var F=n(41);n(74);function P(){var e=Object(s.c)(),t=Object(o.a)(e,2),n=t[0],a=(t[1],Object(c.useState)({})),i=Object(o.a)(a,2),r=i[0],l=i[1],d=Object(c.useState)(),b=Object(o.a)(d,2),p=b[0],O=b[1],h=Object(c.useState)(),f=Object(o.a)(h,2),m=f[0],g=f[1],w=Object(c.useState)(),S=Object(o.a)(w,2),C=S[0],N=S[1],P=Object(c.useState)(!0),T=Object(o.a)(P,2),_=T[0],A=T[1],E=new F.a,L=Object(j.f)();Object(c.useEffect)((function(){l({p1:n.get("p1"),p2:n.get("p2")})}),[n]),Object(c.useEffect)((function(){if(void 0!==r.p1&&void 0!==r.p2){var e=function(){var e=Object(v.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.a.get("/api/app/playlistComparison?p1=".concat(r.p1,"&p2=").concat(r.p2)).then((function(e){console.log(e),O(e.data.playlist1),g(e.data.playlist2),N(e.data.stats),A(!1),E.addConfetti({confettiRadius:6,confettiNumber:500})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[r]);return Object(u.jsx)("div",{className:"App",children:_?null:Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)("h1",{children:"The results are in!"}),Object(u.jsx)("h2",{children:C?"".concat(C.sameSongs," songs are on both of these lists"):null}),Object(u.jsx)(k.a,{variant:"primary",onClick:function(e){e.preventDefault(),L("/")},children:"Back to the beginning!"}),Object(u.jsxs)("div",{className:"table-container",children:[Object(u.jsx)(D,{playlistData:p}),Object(u.jsx)(D,{playlistData:m})]})]})})}function T(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Page not Found!"}),Object(u.jsx)(s.b,{to:"/",children:"Go Home"})]})}var _=function(){return Object(u.jsx)(s.a,{children:Object(u.jsxs)(j.c,{children:[Object(u.jsx)(j.a,{path:"/",element:Object(u.jsx)(p,{})}),Object(u.jsx)(j.a,{path:"/playlistChoice",element:Object(u.jsx)(N,{})}),Object(u.jsx)(j.a,{path:"/compare",element:Object(u.jsx)(P,{})}),Object(u.jsx)(j.a,{path:"*",element:Object(u.jsx)(T,{})})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};n(75);r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(_,{})}),document.getElementById("root")),A()}},[[76,1,2]]]);
//# sourceMappingURL=main.96e60f5b.chunk.js.map